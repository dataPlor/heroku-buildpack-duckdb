#!/bin/sh

# Download DuckDB
DUCKDB_VERSION="1.0.0"
DOWNLOAD_URL="https://github.com/duckdb/duckdb/releases/download/v$DUCKDB_VERSION/duckdb_cli-linux-amd64.zip"

echo "-----> Downloading DuckDB $DUCKDB_VERSION"
curl -L $DOWNLOAD_URL -o /tmp/duckdb.zip

# Unzip and move to bin
unzip /tmp/duckdb.zip -d /tmp/
mkdir -p $BUILD_DIR/bin
mv /tmp/duckdb $BUILD_DIR/bin/

# Make sure the binary is executable
chmod +x $BUILD_DIR/bin/duckdb

# Add DuckDB to PATH for future build steps
echo "export PATH=\"$BUILD_DIR/bin:\$PATH\"" > $BUILD_DIR/.profile.d/duckdb.sh

echo "-----> DuckDB installation completed"
